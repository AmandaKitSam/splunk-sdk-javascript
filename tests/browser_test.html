<!DOCTYPE html>
<html>
  <head>
    <title>browser-require example</title>
  </head>
  <body>
    <script>
      // What is this?
      i18n_register = function(){}
    </script>
    <script type="text/javascript" src="../build/splunk.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.js"></script>
    <script>
      var JQueryHttp = Splunk.JQueryHttp;

      http = new JQueryHttp();
      svc = new Splunk.Client.Service(http, { 
          scheme: "http",
          host: "localhost",
          port: "8000",
          username: "itay",
          password: "changeme",
      });
  
      // Login and list jobs
      var loginP = svc.login();
      var jobsP = loginP.whenResolved(function() { return svc.jobs(); });
      var finalP = jobsP.whenResolved(function(list) {
        for(var i = 0; i < list.length; i++) {
          console.log("  job: "  + list[i].sid);
        }
      });

      // In case any of the requests fail
      finalP.whenFailed(function() {
        console.log("Failure: ", arguments);
      });

      // Show failure case
      loginP.whenResolved(function() {
        var jobP = svc.get("search/jobs/1234_nosuchjob");
        jobP.when(
          function() {
            console.log("Success: ", arguments);
          },
          function() {
            console.log("Failure: ", arguments);
          }
        );
      });
      
    </script>
  </body>
</html>